(this["webpackJsonpproyecto-react"]=this["webpackJsonpproyecto-react"]||[]).push([[0],{33:function(e,t,c){},42:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(6),r=c.n(n),a=c(35),o=c.n(a),s=c(15),i=c(9),l=(c(33),c(42),c(37)),j=c(19),b=c(12),d=c(4),u=Object(n.createContext)(),m=function(e){var t=e.children,c=Object(n.useState)([]),r=Object(b.a)(c,2),a=r[0],o=r[1],s=function(e){var t=a.map((function(e){return e.idItem})).indexOf(e);return a[t].precioItem*a[t].qtyItem},i=function(){return a.map((function(e){return s(e.idItem)})).reduce((function(e,t){return e+t}))};return Object(d.jsx)(u.Provider,{value:{cartList:a,addToCart:function(e,t){var c=a.find((function(t){return t.idItem===e.id}));void 0===c?o([].concat(Object(j.a)(a),[{idItem:e.id,imgItem:e.imagen,titleItem:e.title,precioItem:e.precio,qtyItem:t}])):(c.qtyItem+=t,o(Object(j.a)(a)))},removeList:function(){o([])},deleteItem:function(e){var t=a.filter((function(t){return t.idItem!==e}));o(t)},calcTotalItem:s,calcSubTotal:i,calcTotal:function(){return i()},calcItemsQty:function(){return a.map((function(e){return e.qtyItem})).reduce((function(e,t){return e+t}),0)}},children:t})},O=function(){var e=Object(n.useContext)(u);return Object(d.jsxs)("div",{className:"NavCart",children:[Object(d.jsx)("span",{style:{color:"white",backgroundColor:"black",borderRadius:"100%"},children:e.calcItemsQty()}),Object(d.jsx)(l.a,{})]})};var x=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("header",{children:Object(d.jsxs)("nav",{className:" barra navbar navbar-expand-lg navbar-dark ",children:[Object(d.jsxs)("div",{className:"container-fluid ",children:[Object(d.jsxs)(s.b,{to:"/",style:{textDecoration:"none",color:"white"},children:[Object(d.jsx)("h3",{children:"Los Sauces"}),Object(d.jsx)("h5",{children:"Muebleria"})]}),Object(d.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(d.jsxs)("ul",{className:" nav ",children:[Object(d.jsx)("li",{className:"nav-item ",children:Object(d.jsx)(s.b,{to:"/",style:{textDecoration:"none",color:"black",margin:"-30%"},children:"Inicio"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(s.b,{to:"/category/CJeUqH9OYyNsBU89zxQW",style:{textDecoration:"none",color:"black",margin:"25%"},children:" Produtos"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(s.b,{to:"/category/7dLHe6Owz9BwvuDeDenK",style:{textDecoration:"none",color:"black",margin:"50%"},children:"Home&Deco"})})]})}),Object(d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDarkDropdown","aria-controls":"navbarNavDarkDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsx)("ul",{className:"navbar-nav",children:Object(d.jsx)("li",{className:"nav-item dropdown"})}),Object(d.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDarkDropdown"})]}),Object(d.jsx)(s.b,{to:"/cart",style:{textDecoration:"none"},children:Object(d.jsx)(O,{})})]})})})},h=(c(44),function(e){var t=e.stock,c=void 0===t?0:t,r=e.initial,a=void 0===r?1:r,o=e.onAdd,s=Object(n.useState)(0),i=Object(b.a)(s,2),l=i[0],j=i[1];Object(n.useEffect)((function(){j(a)}),[a]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"contador",onClick:function(){l>a+1&&j(l-1)},style:{width:"10%"},children:"-"}),l,Object(d.jsx)("button",{className:"contador",onClick:function(){l<c&&j(l+1)},style:{width:"10%"},children:"+"}),c&&l?Object(d.jsx)("button",{className:"onAdd",onClick:function(){return o(l)},children:"Agregar"}):Object(d.jsx)("button",{className:"agregrar",variant:"contained",disabled:!0,children:"Agregar"})]})}),p=function(e){var t=e.item,c=Object(n.useState)(0),r=Object(b.a)(c,2),a=r[0],o=r[1],i=Object(n.useContext)(u);return Object(d.jsx)(d.Fragment,{children:t&&t.imagen?Object(d.jsxs)("div",{className:"card col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4",style:{width:"18rem"},children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:t.imagen,className:"modular",alt:"imagen",style:{width:"100%"}})}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("p",{className:"card-text",children:[t.title," ",Object(d.jsx)("br",{}),"Descripci\xf3n: ",t.description," ",Object(d.jsx)("br",{}),"stock: ",t.stock," ",Object(d.jsx)("br",{}),"precio: $ ",t.precio," ",Object(d.jsx)("br",{}),"medidas: ",t.medidas," "]}),0===a?Object(d.jsx)(h,{stock:t.stock,initial:a,onAdd:function(e){alert("Agregaste "+e+" productos al \ud83d\uded2"),o(e),i.addToCart(t,e)}}):Object(d.jsx)(s.b,{to:"/cart",style:{textDecoration:"none"},children:Object(d.jsx)("button",{className:"cart",children:"Ir a Carrito"})})]})]}):Object(d.jsx)("p",{children:"Cargando..."})})},f=c(0),v=c.n(f),g=c(32),y=c(3),N=c(21),I=c(18),k=c(36),w=Object(k.a)({apiKey:"AIzaSyDTZ6FYYS1wR6350Q7Clb2VXVWgI0JRSTE",authDomain:"ecommerce-proyectoreact.firebaseapp.com",projectId:"ecommerce-proyectoreact",storageBucket:"ecommerce-proyectoreact.appspot.com",messagingSenderId:"419920561081",appId:"1:419920561081:web:3d056aad0b359bc9212c68"}),C=Object(I.d)(w),D=function(){var e=Object(y.a)(v.a.mark((function e(t){var c,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t?Object(N.h)(Object(N.a)(C,"products"),Object(N.l)("categoryId","==",t)):Object(N.h)(Object(N.a)(C,"products"),Object(N.g)("title")),e.next=3,Object(N.d)(c);case 3:return n=e.sent,r=n.docs.map((function(e){return Object(g.a)({id:e.id},e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(y.a)(v.a.mark((function e(t){var c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(I.b)(C,"products",t),e.next=3,Object(I.c)(c);case 3:if(!(n=e.sent).exists()){e.next=8;break}return e.abrupt("return",Object(g.a)({id:t},n.data()));case 8:console.log("No such document!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=D,T=function(){var e=Object(n.useState)({}),t=Object(b.a)(e,2),c=t[0],r=t[1],a=Object(i.g)().idItem;return Object(n.useEffect)((function(){S(a).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[a]),Object(d.jsx)("div",{className:"p-3 mb-8 text-dark tarjeta",children:Object(d.jsx)(p,{item:c})})},A=function(e){var t=e.data;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"card col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4",style:{width:"18rem"},children:[Object(d.jsx)("img",{src:t.imagen,className:"modular",alt:"imagen",style:{width:"100%"}}),Object(d.jsx)("div",{className:"card-body detalle ",children:Object(d.jsx)(s.b,{className:"buttonDetail",to:"/item/".concat(t.id),style:{textDecoration:"none",margin:"30%",cursor:"pointer"},children:"Detalles"})})]})})},q=function(e){var t=e.items;return console.log(t),Object(d.jsx)(d.Fragment,{children:t.length?t.map((function(e){return Object(d.jsx)(A,{data:e},e.id)})):Object(d.jsx)("p",{children:"Cargando..."})})},z=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=t[0],r=t[1],a=Object(i.g)().idCategory;return Object(n.useEffect)((function(){L(a).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[a]),Object(n.useEffect)((function(){return function(){r([])}}),[]),Object(d.jsx)("div",{className:"p-3 mb-8 text-dark tarjeta",children:Object(d.jsx)(q,{items:c})})},E=function(){var e=Object(n.useContext)(u);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"text-center",children:"Mi carrito\ud83d\uded2"}),Object(d.jsxs)(s.b,{to:"/",children:[" ",Object(d.jsx)("button",{className:"float-end",style:{backgroundColor:"#f6d7a7",color:"black",fontSize:"1.3em",bottom:"-20em"},children:"Volver al cat\xe1logo "})]}),e.cartList.length>0&&Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"card-body total",style:{position:"relative",width:"30%",bottom:"-10em",left:"65%"},children:[Object(d.jsx)("h4",{className:"mb-5 text-center",children:"Orden de compra"}),Object(d.jsxs)("h5",{className:"card-header",children:["Subtotal:",Object(d.jsxs)("span",{className:"float-end",style:{bottom:" -0.1em"},children:[" $ ",e.calcSubTotal()]})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{className:"fw-bold fs-4",children:["TOTAL: ",Object(d.jsxs)("span",{className:"float-end",style:{bottom:" -0.1em"},children:["$ ",e.calcTotal()]})]}),Object(d.jsx)("button",{className:"btn btn-dark",onClick:function(){var t=e.cartList.map((function(e){return{id:e.idItem,title:e.titleItem,price:e.precioItem}}));e.cartList.forEach(function(){var e=Object(y.a)(v.a.mark((function e(t){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(I.b)(C,"products",t.idItem),e.next=3,Object(I.h)(c,{stock:Object(I.e)(-t.qtyItem)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var c={buyer:{name:"Leandro Sena",email:"leo_sena@react.com",phone:"223245657"},total:e.calcTotal(),items:t,date:Object(I.f)()};console.log(c);var n=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(I.b)(Object(I.a)(C,"orders")),e.next=3,Object(I.g)(t,c);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n().then((function(e){return alert("Su pedido se creo exitosamente, en instante le llegaron un mail.\n\n\nOrden ID: "+e.id+"\n\n")})).catch((function(e){return console.log(e)})),e.removeList()},children:"Finalizar compra"})]})}),e.cartList.length>0?Object(d.jsx)("button",{onClick:e.removeList,style:{backgroundColor:"#88aaaa",color:"black",fontSize:"1.3em",position:"relative",bottom:"12.5em"},children:"Vaciar carrito"}):Object(d.jsxs)("h5",{style:{position:"absolute",bottom:"20em",left:"-5em"},children:[" ",Object(d.jsx)("br",{}),"Carrito vacio"]}),e.cartList.length>0&&e.cartList.map((function(t){return Object(d.jsxs)("div",{style:{width:"18rem",marginTop:"-10%",border:"100%"},children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{style:{border:"none",bottom:" 10em"},src:t.imgItem,className:"img-thumbnail",alt:"..."})}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("p",{className:"card-text",style:{position:"relative",left:"100%",bottom:" 10em"},children:[t.titleItem," ",Object(d.jsx)("br",{})]}),Object(d.jsxs)("div",{className:"cartDetail",children:[Object(d.jsx)("button",{onClick:function(){return e.deleteItem(t.idItem)},style:{position:"relative",left:"0%",bottom:" -9em",fontSize:"1.2em",backgroundColor:"#88aaaa"},children:"Quitar productos"}),Object(d.jsxs)("h5",{children:[t.qtyItem," Producto(s) ",Object(d.jsx)("br",{})," ",Object(d.jsx)("br",{})," $ ",t.precioItem," por unidad"]})]})]})]},t.idItem)}))]})};var F=function(){return Object(d.jsx)(m,{children:Object(d.jsxs)(s.a,{children:[Object(d.jsx)(x,{}),Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(z,{})}),Object(d.jsx)(i.a,{path:"/category/:idCategory",element:Object(d.jsx)(z,{})}),Object(d.jsx)(i.a,{path:"/item/:idItem",element:Object(d.jsx)(T,{})}),Object(d.jsx)(i.a,{path:"/cart",element:Object(d.jsx)(E,{})})]})]})})};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.c22d7a54.chunk.js.map