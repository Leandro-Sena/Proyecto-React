(this["webpackJsonpproyecto-react"]=this["webpackJsonpproyecto-react"]||[]).push([[0],{33:function(e,t,c){},42:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(6),r=c.n(n),a=c(35),s=c.n(a),o=c(15),i=c(9),l=(c(33),c(42),c(37)),j=c(19),d=c(12),b=c(4),u=Object(n.createContext)(),m=function(e){var t=e.children,c=Object(n.useState)([]),r=Object(d.a)(c,2),a=r[0],s=r[1],o=function(e){var t=a.map((function(e){return e.idItem})).indexOf(e);return a[t].precioItem*a[t].qtyItem},i=function(){return a.map((function(e){return o(e.idItem)})).reduce((function(e,t){return e+t}))};return Object(b.jsx)(u.Provider,{value:{cartList:a,addToCart:function(e,t){var c=a.find((function(t){return t.idItem===e.id}));void 0===c?s([].concat(Object(j.a)(a),[{idItem:e.id,imgItem:e.imagen,titleItem:e.title,precioItem:e.precio,qtyItem:t}])):(c.qtyItem+=t,s(Object(j.a)(a)))},removeList:function(){s([])},deleteItem:function(e){var t=a.filter((function(t){return t.idItem!==e}));s(t)},calcTotalItem:o,calcSubTotal:i,calcTotal:function(){return i()},calcItemsQty:function(){return a.map((function(e){return e.qtyItem})).reduce((function(e,t){return e+t}),0)}},children:t})},O=function(){var e=Object(n.useContext)(u);return Object(b.jsxs)("div",{className:"NavCart",children:[Object(b.jsx)("span",{style:{color:"white",backgroundColor:"black",borderRadius:"100%"},children:e.calcItemsQty()}),Object(b.jsx)(l.a,{})]})};var x=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("header",{children:Object(b.jsxs)("nav",{className:" barra navbar navbar-expand-lg navbar-dark ",children:[Object(b.jsxs)("div",{className:"container-fluid ",children:[Object(b.jsxs)(o.b,{to:"/",style:{textDecoration:"none",color:"white"},children:[Object(b.jsx)("h3",{children:"Los Sauces"}),Object(b.jsx)("h5",{children:"Muebleria"})]}),Object(b.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(b.jsxs)("ul",{className:" nav ",children:[Object(b.jsx)("li",{className:"nav-item ",children:Object(b.jsx)(o.b,{to:"/category/EBkwCh6Q2OP1BZwlRYc3",style:{textDecoration:"none",color:"black",margin:"-30%"},children:"Living"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(o.b,{to:"/category/7dLHe6Owz9BwvuDeDenK",style:{textDecoration:"none",color:"black",margin:"25%"},children:" Cocina"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(o.b,{to:"/category/CJeUqH9OYyNsBU89zxQW",style:{textDecoration:"none",color:"black",margin:"50%"},children:"Dormitorio"})})]})}),Object(b.jsx)("ul",{className:"navbar-nav",children:Object(b.jsx)("li",{className:"nav-item dropdown"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDarkDropdown"})]}),Object(b.jsx)(o.b,{to:"/cart",style:{textDecoration:"none"},children:Object(b.jsx)(O,{})})]})})})},h=(c(44),function(e){var t=e.stock,c=void 0===t?0:t,r=e.initial,a=void 0===r?1:r,s=e.onAdd,o=Object(n.useState)(0),i=Object(d.a)(o,2),l=i[0],j=i[1];Object(n.useEffect)((function(){j(a)}),[a]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"contador",onClick:function(){l>a+1&&j(l-1)},style:{width:"10%"},children:"-"}),l,Object(b.jsx)("button",{className:"contador",onClick:function(){l<c&&j(l+1)},style:{width:"10%"},children:"+"}),c&&l?Object(b.jsx)("button",{className:"onAdd",onClick:function(){return s(l)},children:"Agregar"}):Object(b.jsx)("button",{className:"agregrar",variant:"contained",disabled:!0,children:"Agregar"})]})}),f=function(e){var t=e.item,c=Object(n.useState)(0),r=Object(d.a)(c,2),a=r[0],s=r[1],i=Object(n.useContext)(u);return Object(b.jsx)(b.Fragment,{children:t&&t.imagen?Object(b.jsxs)("div",{className:"card col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4",style:{width:"18rem"},children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:t.imagen,className:"modular",alt:"imagen",style:{width:"100%"}})}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("p",{className:"card-text",children:[t.title," ",Object(b.jsx)("br",{}),"Descripci\xf3n: ",t.description," ",Object(b.jsx)("br",{}),"stock: ",t.stock," ",Object(b.jsx)("br",{}),"precio: $ ",t.precio," ",Object(b.jsx)("br",{}),"medidas: ",t.medidas," "]}),0===a?Object(b.jsx)(h,{stock:t.stock,initial:a,onAdd:function(e){alert("Agregaste "+e+" productos al \ud83d\uded2"),s(e),i.addToCart(t,e)}}):Object(b.jsx)(o.b,{to:"/cart",style:{textDecoration:"none"},children:Object(b.jsx)("button",{className:"cart",children:"Ir a Carrito"})})]})]}):Object(b.jsx)("p",{children:"Cargando..."})})},p=c(0),v=c.n(p),g=c(32),y=c(3),N=c(21),I=c(18),k=c(36),w=Object(k.a)({apiKey:"AIzaSyDTZ6FYYS1wR6350Q7Clb2VXVWgI0JRSTE",authDomain:"ecommerce-proyectoreact.firebaseapp.com",projectId:"ecommerce-proyectoreact",storageBucket:"ecommerce-proyectoreact.appspot.com",messagingSenderId:"419920561081",appId:"1:419920561081:web:3d056aad0b359bc9212c68"}),C=Object(I.d)(w),S=function(){var e=Object(y.a)(v.a.mark((function e(t){var c,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t?Object(N.h)(Object(N.a)(C,"products"),Object(N.l)("categoryId","==",t)):Object(N.h)(Object(N.a)(C,"products"),Object(N.g)("title")),e.next=3,Object(N.d)(c);case 3:return n=e.sent,r=n.docs.map((function(e){return Object(g.a)({id:e.id},e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(v.a.mark((function e(t){var c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(I.b)(C,"products",t),e.next=3,Object(I.c)(c);case 3:if(!(n=e.sent).exists()){e.next=8;break}return e.abrupt("return",Object(g.a)({id:t},n.data()));case 8:console.log("No such document!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=S,T=function(){var e=Object(n.useState)({}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(i.g)().idItem;return Object(n.useEffect)((function(){D(a).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[a]),Object(b.jsx)("div",{className:"p-3 mb-8 text-dark tarjeta",children:Object(b.jsx)(f,{item:c})})},A=function(e){var t=e.data;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"card col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4",style:{width:"18rem"},children:[Object(b.jsx)("img",{src:t.imagen,className:"modular",alt:"imagen",style:{width:"100%"}}),Object(b.jsx)("div",{className:"card-body detalle ",children:Object(b.jsx)(o.b,{className:"buttonDetail",to:"/item/".concat(t.id),style:{textDecoration:"none",margin:"30%",cursor:"pointer"},children:"Ver mas"})})]})})},E=function(e){var t=e.items;return console.log(t),Object(b.jsx)(b.Fragment,{children:t.length?t.map((function(e){return Object(b.jsx)(A,{data:e},e.id)})):Object(b.jsx)("p",{children:"Cargando..."})})},q=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(i.g)().idCategory;return Object(n.useEffect)((function(){L(a).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[a]),Object(n.useEffect)((function(){return function(){r([])}}),[]),Object(b.jsx)("div",{className:"p-3 mb-8 text-dark tarjeta",children:Object(b.jsx)(E,{items:c})})},z=function(){var e=Object(n.useContext)(u);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"text-center",children:"Mi carrito\ud83d\uded2"}),Object(b.jsxs)(o.b,{to:"/",children:[" ",Object(b.jsx)("button",{className:"float-end",style:{backgroundColor:"#f6d7a7",color:"black",fontSize:"1.3em",bottom:"-20em"},children:"Volver al cat\xe1logo "})]}),e.cartList.length>0&&Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"card-body total",style:{position:"relative",width:"30%",bottom:"-10em",left:"65%"},children:[Object(b.jsx)("h4",{className:"mb-5 text-center",children:"Orden de compra"}),Object(b.jsxs)("h5",{className:"card-header",children:["Subtotal:",Object(b.jsxs)("span",{className:"float-end",style:{bottom:" -0.1em"},children:[" $ ",e.calcSubTotal()]})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("p",{className:"fw-bold fs-4",children:["TOTAL: ",Object(b.jsxs)("span",{className:"float-end",style:{bottom:" -0.1em"},children:["$ ",e.calcTotal()]})]}),Object(b.jsx)("button",{className:"btn btn-dark",onClick:function(){var t=e.cartList.map((function(e){return{id:e.idItem,title:e.titleItem,price:e.precioItem}}));e.cartList.forEach(function(){var e=Object(y.a)(v.a.mark((function e(t){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(I.b)(C,"products",t.idItem),e.next=3,Object(I.h)(c,{stock:Object(I.e)(-t.qtyItem)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var c={buyer:{name:"Leandro Sena",email:"leo_sena@react.com",phone:"223245657"},total:e.calcTotal(),items:t,date:Object(I.f)()};console.log(c);var n=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(I.b)(Object(I.a)(C,"orders")),e.next=3,Object(I.g)(t,c);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n().then((function(e){return alert("Su pedido se creo exitosamente, en instante le llegaron un mail.\n\n\nOrden ID: "+e.id+"\n\n")})).catch((function(e){return console.log(e)})),e.removeList()},children:"Finalizar compra"})]})}),e.cartList.length>0?Object(b.jsx)("button",{onClick:e.removeList,style:{backgroundColor:"#88aaaa",color:"black",fontSize:"1.3em",position:"relative",bottom:"12.5em"},children:"Vaciar carrito"}):Object(b.jsxs)("h5",{style:{position:"absolute",bottom:"20em",left:"-5em"},children:[" ",Object(b.jsx)("br",{}),"Carrito vacio"]}),e.cartList.length>0&&e.cartList.map((function(t){return Object(b.jsxs)("div",{style:{width:"18rem",marginTop:"-10%",border:"100%"},children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{style:{border:"none",bottom:" 10em"},src:t.imgItem,className:"img-thumbnail",alt:"..."})}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("p",{className:"card-text",style:{position:"relative",left:"100%",bottom:" 10em"},children:[t.titleItem," ",Object(b.jsx)("br",{})]}),Object(b.jsxs)("div",{className:"cartDetail",children:[Object(b.jsx)("button",{onClick:function(){return e.deleteItem(t.idItem)},style:{position:"relative",left:"0%",bottom:" -9em",fontSize:"1.2em",backgroundColor:"#88aaaa"},children:"Quitar productos"}),Object(b.jsxs)("h5",{children:[t.qtyItem," Producto(s) ",Object(b.jsx)("br",{})," ",Object(b.jsx)("br",{})," $ ",t.precioItem," por unidad"]})]})]})]},t.idItem)}))]})};var B=function(){return Object(b.jsx)(m,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(x,{}),Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/",element:Object(b.jsx)(q,{})}),Object(b.jsx)(i.a,{path:"/category/:idCategory",element:Object(b.jsx)(q,{})}),Object(b.jsx)(i.a,{path:"/item/:idItem",element:Object(b.jsx)(T,{})}),Object(b.jsx)(i.a,{path:"/cart",element:Object(b.jsx)(z,{})})]})]})})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.986af347.chunk.js.map